/* https://www.axel-hahn.de/ */
var counterhistory=function(){this.sServerIndex=false;this.sCounter=false;this._sDatavar="apachestatusHistory";this._aData=false;this._iMaxItems=250;this._dataLoad=function(){this._aData=JSON.parse(localStorage.getItem(this._sDatavar))};this._dataSave=function(){return localStorage.setItem(this._sDatavar,JSON.stringify(this._aData))};this._cleanup=function(b){if(!this._aData[this.sServerIndex][this.sCounter]){return false}var a=this._aData[this.sServerIndex][this.sCounter];a.splice((b),a.length);return true};this.getLast=function(f){if(!this._aData[this.sServerIndex]||!this._aData[this.sServerIndex][this.sCounter]||this._aData[this.sServerIndex][this.sCounter].length<1){return false}var b={min:false,max:false,avg:false,data:[]};var e=0;var c=this._aData[this.sServerIndex][this.sCounter];var a=false;var g=false;if(c.length<f){f=c.length}for(var d=0;d<f;d++){a=c[d];g=a[1]/1;var h=/^-?[\.0-9]+$/;if(h.test(a[1])){if(!b.min){b.min=g}if(!b.max){b.max=g}if(g<b.min){b.min=g}if(g>b.max){b.max=g}e+=g}b.data.push(a)}b.avg=Math.round(e/f*1000)/1000;return b};this.add=function(b){var a=new Date();if(!this._aData){this._aData=new Object()}if(!this._aData[this.sServerIndex]){this._aData[this.sServerIndex]=new Object()}if(!this._aData[this.sServerIndex][this.sCounter]){this._aData[this.sServerIndex][this.sCounter]=[]}this._aData[this.sServerIndex][this.sCounter].unshift([a,b]);this._cleanup(this._iMaxItems);this._dataSave();return true};this.setCounter=function(a){return this.sCounter=a};this.setServerIndex=function(a){return this.sServerIndex=a};this._dataLoad();if(arguments){if(arguments[0]){this.setServerIndex(arguments[0])}if(arguments[1]){this.setCounter(arguments[1])}}return true};